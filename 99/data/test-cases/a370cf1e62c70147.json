{"uid":"a370cf1e62c70147","name":"test_orders_limit[api-17]","fullName":"tests.endpoints.test_orders#test_orders_limit","historyId":"4bd580a9b6026368cbcb285e5bb02c86","time":{"start":1733145940922,"stop":1733145945302,"duration":4380},"status":"broken","statusMessage":"pydantic_core._pydantic_core.ValidationError: 2 validation errors for OrdersResponse\nmeta\n  Field required [type=missing, input_value={'code': 500, 'message': 'Internal server error'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.9/v/missing\norders\n  Field required [type=missing, input_value={'code': 500, 'message': 'Internal server error'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.9/v/missing","statusTrace":"api_client = <api_handler.api_client.ApiClient object at 0x7f9c922854f0>\nx_task_value = 'api-17'\n\n    @allure.feature(\"Orders API\")\n    @allure.story(\"Limit list user's orders\")\n    @pytest.mark.parametrize(\"x_task_value\", [\"api-17\"])\n    def test_orders_limit(api_client, x_task_value):\n        users_response = api_client.get_users(x_task_value, 0)\n        users_dto = Users(**users_response.json())\n    \n        user_uuid = users_dto.users[1].uuid\n    \n        games = api_client.get_games(x_task_value)\n        games_dto = GamesResponse(**games.json())\n        game_uuid = games_dto.games[0].uuid\n    \n        order_data = OrderItemList(items=[\n            OrderItem(item_uuid=game_uuid, quantity=1)\n        ])\n    \n        api_client.order_create(user_uuid, order_data.model_dump(), x_task_value)\n        api_client.order_create(user_uuid, order_data.model_dump(), x_task_value)\n        limit = 1\n        response = api_client.orders(user_uuid, limit, x_task_value)\n>       orders = OrdersResponse(**response.json())\nE       pydantic_core._pydantic_core.ValidationError: 2 validation errors for OrdersResponse\nE       meta\nE         Field required [type=missing, input_value={'code': 500, 'message': 'Internal server error'}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.9/v/missing\nE       orders\nE         Field required [type=missing, input_value={'code': 500, 'message': 'Internal server error'}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.9/v/missing\n\ntests/endpoints/test_orders.py:50: ValidationError","flaky":true,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1733145937791,"stop":1733145937793,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_test","time":{"start":1733145937793,"stop":1733145939754,"duration":1961},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"worker_id","time":{"start":1733145937793,"stop":1733145937793,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1733145937793,"stop":1733145937793,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_client","time":{"start":1733145937793,"stop":1733145937793,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"pydantic_core._pydantic_core.ValidationError: 2 validation errors for OrdersResponse\nmeta\n  Field required [type=missing, input_value={'code': 500, 'message': 'Internal server error'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.9/v/missing\norders\n  Field required [type=missing, input_value={'code': 500, 'message': 'Internal server error'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.9/v/missing","statusTrace":"api_client = <api_handler.api_client.ApiClient object at 0x7f9c922854f0>\nx_task_value = 'api-17'\n\n    @allure.feature(\"Orders API\")\n    @allure.story(\"Limit list user's orders\")\n    @pytest.mark.parametrize(\"x_task_value\", [\"api-17\"])\n    def test_orders_limit(api_client, x_task_value):\n        users_response = api_client.get_users(x_task_value, 0)\n        users_dto = Users(**users_response.json())\n    \n        user_uuid = users_dto.users[1].uuid\n    \n        games = api_client.get_games(x_task_value)\n        games_dto = GamesResponse(**games.json())\n        game_uuid = games_dto.games[0].uuid\n    \n        order_data = OrderItemList(items=[\n            OrderItem(item_uuid=game_uuid, quantity=1)\n        ])\n    \n        api_client.order_create(user_uuid, order_data.model_dump(), x_task_value)\n        api_client.order_create(user_uuid, order_data.model_dump(), x_task_value)\n        limit = 1\n        response = api_client.orders(user_uuid, limit, x_task_value)\n>       orders = OrdersResponse(**response.json())\nE       pydantic_core._pydantic_core.ValidationError: 2 validation errors for OrdersResponse\nE       meta\nE         Field required [type=missing, input_value={'code': 500, 'message': 'Internal server error'}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.9/v/missing\nE       orders\nE         Field required [type=missing, input_value={'code': 500, 'message': 'Internal server error'}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.9/v/missing\n\ntests/endpoints/test_orders.py:50: ValidationError","steps":[],"attachments":[{"uid":"af2b89b7a2f14b97","name":"log","source":"af2b89b7a2f14b97.txt","type":"text/plain","size":4524},{"uid":"2009a036caa2841f","name":"stderr","source":"2009a036caa2841f.txt","type":"text/plain","size":4488}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_test::0","time":{"start":1733145947689,"stop":1733145947689,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"story","value":"Limit list user's orders"},{"name":"feature","value":"Orders API"},{"name":"parentSuite","value":"tests.endpoints"},{"name":"suite","value":"test_orders"},{"name":"host","value":"fv-az1536-526"},{"name":"thread","value":"2798-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.endpoints.test_orders"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"x_task_value","value":"'api-17'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":1,"skipped":0,"passed":3,"unknown":0,"total":6},"items":[{"uid":"f5793ae0d52184b5","reportUrl":"https://ils-808.github.io/qahack/98//#testresult/f5793ae0d52184b5","status":"passed","time":{"start":1733145780870,"stop":1733145784773,"duration":3903}},{"uid":"a02704fb394c1fdc","reportUrl":"https://ils-808.github.io/qahack/63//#testresult/a02704fb394c1fdc","status":"passed","time":{"start":1733086107863,"stop":1733086112049,"duration":4186}},{"uid":"845db54455cdeece","reportUrl":"https://ils-808.github.io/qahack/62//#testresult/845db54455cdeece","status":"failed","statusDetails":"AssertionError: Was displayed 3 orders instead of 1\nassert 3 == 1\n +  where 3 = len([Order(created_at=datetime.datetime(2024, 12, 1, 20, 29, 51, 8832, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 29, 51, 8832, tzinfo=TzInfo(UTC)), user_uuid='bbac09fe-b517-4c8a-9e77-90a772260ea8', uuid='bb35944e-daab-418d-b35a-f213ee0674a3'), Order(created_at=datetime.datetime(2024, 12, 1, 20, 29, 50, 177985, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 29, 50, 177985, tzinfo=TzInfo(UTC)), user_uuid='bbac09fe-b517-4c8a-9e77-90a772260ea8', uuid='c2764f6f-ecaf-4bef-b095-b1fc911b82d8'), Order(created_at=datetime.datetime(2024, 12, 1, 20, 29, 47, 787179, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 29, 47, 787179, tzinfo=TzInfo(UTC)), user_uuid='bbac09fe-b517-4c8a-9e77-90a772260ea8', uuid='4edbcf62-25ae-42d3-80e8-6e63267d19b5')])\n +    where [Order(created_at=datetime.datetime(2024, 12, 1, 20, 29, 51, 8832, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 29, 51, 8832, tzinfo=TzInfo(UTC)), user_uuid='bbac09fe-b517-4c8a-9e77-90a772260ea8', uuid='bb35944e-daab-418d-b35a-f213ee0674a3'), Order(created_at=datetime.datetime(2024, 12, 1, 20, 29, 50, 177985, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 29, 50, 177985, tzinfo=TzInfo(UTC)), user_uuid='bbac09fe-b517-4c8a-9e77-90a772260ea8', uuid='c2764f6f-ecaf-4bef-b095-b1fc911b82d8'), Order(created_at=datetime.datetime(2024, 12, 1, 20, 29, 47, 787179, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 29, 47, 787179, tzinfo=TzInfo(UTC)), user_uuid='bbac09fe-b517-4c8a-9e77-90a772260ea8', uuid='4edbcf62-25ae-42d3-80e8-6e63267d19b5')] = OrdersResponse(meta=Meta(total=3), orders=[Order(created_at=datetime.datetime(2024, 12, 1, 20, 29, 51, 8832, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 29, 51, 8832, tzinfo=TzInfo(UTC)), user_uuid='bbac09fe-b517-4c8a-9e77-90a772260ea8', uuid='bb35944e-daab-418d-b35a-f213ee0674a3'), Order(created_at=datetime.datetime(2024, 12, 1, 20, 29, 50, 177985, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 29, 50, 177985, tzinfo=TzInfo(UTC)), user_uuid='bbac09fe-b517-4c8a-9e77-90a772260ea8', uuid='c2764f6f-ecaf-4bef-b095-b1fc911b82d8'), Order(created_at=datetime.datetime(2024, 12, 1, 20, 29, 47, 787179, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 29, 47, 787179, tzinfo=TzInfo(UTC)), user_uuid='bbac09fe-b517-4c8a-9e77-90a772260ea8', uuid='4edbcf62-25ae-42d3-80e8-6e63267d19b5')]).orders","time":{"start":1733084988015,"stop":1733084992314,"duration":4299}},{"uid":"92c6fdbf79193582","reportUrl":"https://ils-808.github.io/qahack/61//#testresult/92c6fdbf79193582","status":"failed","statusDetails":"AssertionError: Was displayed 3 orders instead of 1\nassert 3 == 1\n +  where 3 = len([Order(created_at=datetime.datetime(2024, 12, 1, 20, 26, 9, 811463, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 26, 9, 811463, tzinfo=TzInfo(UTC)), user_uuid='0724eee0-3365-4f2a-b849-560539f94ebc', uuid='26349d95-1ecb-4a0f-85a7-6c0575852d90'), Order(created_at=datetime.datetime(2024, 12, 1, 20, 26, 8, 870037, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 26, 8, 870037, tzinfo=TzInfo(UTC)), user_uuid='0724eee0-3365-4f2a-b849-560539f94ebc', uuid='9c02f36a-a461-4440-9bee-8f78d5ccd1f2'), Order(created_at=datetime.datetime(2024, 12, 1, 20, 26, 6, 482102, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 26, 6, 482102, tzinfo=TzInfo(UTC)), user_uuid='0724eee0-3365-4f2a-b849-560539f94ebc', uuid='c279aae0-efa1-4d43-930c-83f745fde2f9')])\n +    where [Order(created_at=datetime.datetime(2024, 12, 1, 20, 26, 9, 811463, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 26, 9, 811463, tzinfo=TzInfo(UTC)), user_uuid='0724eee0-3365-4f2a-b849-560539f94ebc', uuid='26349d95-1ecb-4a0f-85a7-6c0575852d90'), Order(created_at=datetime.datetime(2024, 12, 1, 20, 26, 8, 870037, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 26, 8, 870037, tzinfo=TzInfo(UTC)), user_uuid='0724eee0-3365-4f2a-b849-560539f94ebc', uuid='9c02f36a-a461-4440-9bee-8f78d5ccd1f2'), Order(created_at=datetime.datetime(2024, 12, 1, 20, 26, 6, 482102, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 26, 6, 482102, tzinfo=TzInfo(UTC)), user_uuid='0724eee0-3365-4f2a-b849-560539f94ebc', uuid='c279aae0-efa1-4d43-930c-83f745fde2f9')] = OrdersResponse(meta=Meta(total=3), orders=[Order(created_at=datetime.datetime(2024, 12, 1, 20, 26, 9, 811463, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 26, 9, 811463, tzinfo=TzInfo(UTC)), user_uuid='0724eee0-3365-4f2a-b849-560539f94ebc', uuid='26349d95-1ecb-4a0f-85a7-6c0575852d90'), Order(created_at=datetime.datetime(2024, 12, 1, 20, 26, 8, 870037, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 26, 8, 870037, tzinfo=TzInfo(UTC)), user_uuid='0724eee0-3365-4f2a-b849-560539f94ebc', uuid='9c02f36a-a461-4440-9bee-8f78d5ccd1f2'), Order(created_at=datetime.datetime(2024, 12, 1, 20, 26, 6, 482102, tzinfo=TzInfo(UTC)), items=[ItemCart(item_uuid='1990ecdd-4d3d-4de2-91b9-d45d794c82bc', quantity=1, total_price=5999)], status='open', total_price=5999, updated_at=datetime.datetime(2024, 12, 1, 20, 26, 6, 482102, tzinfo=TzInfo(UTC)), user_uuid='0724eee0-3365-4f2a-b849-560539f94ebc', uuid='c279aae0-efa1-4d43-930c-83f745fde2f9')]).orders","time":{"start":1733084766694,"stop":1733084770783,"duration":4089}},{"uid":"cb470724a0c24dd","reportUrl":"https://ils-808.github.io/qahack/60//#testresult/cb470724a0c24dd","status":"passed","time":{"start":1733084485717,"stop":1733084491009,"duration":5292}}]},"tags":[]},"source":"a370cf1e62c70147.json","parameterValues":["'api-17'"]}